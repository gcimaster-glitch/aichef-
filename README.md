# Aãƒ¡ãƒ‹ãƒ¥ãƒ¼ - çŒ®ç«‹ãƒ¡ãƒ¼ã‚«ãƒ¼

**è€ƒãˆãªãã¦ã„ã„ã€æ‚©ã¾ãªãã¦ã„ã„ã€‚ä»Šæ—¥ã‹ã‚‰1ãƒ¶æœˆåˆ†ã®æ™©ã”ã¯ã‚“ãŒæ±ºã¾ã‚Šã¾ã™ã€‚**

## æ¦‚è¦

Aãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ã€ä¸»å©¦å‘ã‘ã®æ™©å¾¡é£¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼è‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
AIãƒãƒ£ãƒƒãƒˆå½¢å¼ã§è³ªå•ã«ç­”ãˆã‚‹ã ã‘ã§ã€å®¶æ—æ§‹æˆãƒ»äºˆç®—ãƒ»èª¿ç†æ™‚é–“ãƒ»å¥½ã¿ã«åˆã‚ã›ãŸ
1ãƒ¶æœˆåˆ†ã®çŒ®ç«‹ãŒå®Œæˆã—ã¾ã™ã€‚

### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

- **Googleã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢** Ã— **èª¿ç†ã®ãƒ—ãƒ­** Ã— **æ›¸é¡ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ** ã®çŸ¥è¦‹ã‚’çµ±åˆ
- ä½äºˆç®—ã»ã©é£Ÿæã‚’ä½¿ã„å›ã—ã€ç„¡é§„ã‚’æ¸›ã‚‰ã™è¨­è¨ˆ
- ä¸»å©¦ã®ã€Œè€ƒãˆã‚‹è² æ‹…ã€ã‚’è»½æ¸›ã™ã‚‹

## ä¸»ãªæ©Ÿèƒ½

### âœ… å®Œæˆã—ã¦ã„ã‚‹æ©Ÿèƒ½

1. **AIãƒãƒ£ãƒƒãƒˆå½¢å¼ã®è³ªå•å…¥åŠ›**
   - å®¶æ—æ§‹æˆã€äººæ•°
   - äºˆç®—ï¼ˆ300ã€œ1500å††/äººï¼‰
   - èª¿ç†æ™‚é–“ï¼ˆ15ã€œ60åˆ†ï¼‰
   - ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã€è‹¦æ‰‹ãªé£Ÿæ

2. **1ãƒ¶æœˆåˆ†ã®çŒ®ç«‹è‡ªå‹•ç”Ÿæˆ**
   - ä¸»èœãƒ»å‰¯èœãƒ»æ±ç‰©ã®3å“ã‚»ãƒƒãƒˆ
   - å®¶æ—äººæ•°ã«åˆã‚ã›ãŸåˆ†é‡èª¿æ•´

3. **çŒ®ç«‹ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º**
   - æ—¥ä»˜ã”ã¨ã®çŒ®ç«‹ä¸€è¦§
   - æ¨å®šèª¿ç†æ™‚é–“ã®è¡¨ç¤º

4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆCloudflare D1ï¼‰**
   - ãƒ¬ã‚·ãƒ”ãƒã‚¹ã‚¿
   - å®¶æ—ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
   - çŒ®ç«‹è¨ˆç”»

### ğŸš§ ä»Šå¾Œã®å®Ÿè£…äºˆå®š

- è²·ã„ç‰©ãƒªã‚¹ãƒˆç”Ÿæˆï¼ˆé€±ã”ã¨ï¼‰
- çŒ®ç«‹ã®å·®ã—æ›¿ãˆæ©Ÿèƒ½
- ãƒ¬ã‚·ãƒ”è©³ç´°è¡¨ç¤º
- é£Ÿæä½¿ã„å›ã—æœ€é©åŒ–ãƒ­ã‚¸ãƒƒã‚¯
- å­£ç¯€ãƒ»é­šé »åº¦ã®è€ƒæ…®
- 500ãƒ¬ã‚·ãƒ”ã¸ã®æ‹¡å……

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **HTML/CSS/JavaScript** (Vanilla)
- **Tailwind CSS** (CDN)
- **Axios** (HTTP Client)
- **Font Awesome** (Icons)

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Hono** (è»½é‡Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯)
- **Cloudflare Workers/Pages** (ã‚¨ãƒƒã‚¸ãƒ©ãƒ³ã‚¿ã‚¤ãƒ )
- **Cloudflare D1** (SQLiteãƒ™ãƒ¼ã‚¹DB)
- **TypeScript**

### é–‹ç™ºç’°å¢ƒ
- **Wrangler** (Cloudflare CLI)
- **Vite** (ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«)
- **PM2** (ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†)

## ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º

### å‰ææ¡ä»¶

- Node.js 18ä»¥ä¸Š
- npm
- Wrangler CLI

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

\`\`\`bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ãƒ­ãƒ¼ã‚«ãƒ«D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
npm run db:migrate:local

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
wrangler d1 execute webapp-production --local --file=seed.sql
wrangler d1 execute webapp-production --local --file=migrations/0003_minimal_recipes.sql

# ãƒ“ãƒ«ãƒ‰
npm run build

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
pm2 start ecosystem.config.cjs

# ã¾ãŸã¯ç›´æ¥èµ·å‹•
npx wrangler pages dev dist --d1=webapp-production --local --ip 0.0.0.0 --port 3000
\`\`\`

### ã‚¢ã‚¯ã‚»ã‚¹

- **ãƒ­ãƒ¼ã‚«ãƒ«**: http://localhost:3000
- **APIãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯**: http://localhost:3000/api/health

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

\`\`\`
webapp/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.tsx           # Hono APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html          # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆSPAï¼‰
â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ 0001_initial_schema.sql    # DBã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”œâ”€â”€ 0002_sample_recipes.sql    # ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ã‚·ãƒ”ï¼ˆæœªä½¿ç”¨ï¼‰
â”‚   â””â”€â”€ 0003_minimal_recipes.sql   # æœ€å°é™ãƒ¬ã‚·ãƒ”ï¼ˆ3å“ï¼‰
â”œâ”€â”€ seed.sql                # åŸºæœ¬ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ ecosystem.config.cjs    # PM2è¨­å®š
â”œâ”€â”€ wrangler.jsonc          # Cloudflareè¨­å®š
â”œâ”€â”€ vite.config.ts          # Viteãƒ“ãƒ«ãƒ‰è¨­å®š
â””â”€â”€ package.json
\`\`\`

## APIä»•æ§˜

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### `GET /api/health`
ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

#### `POST /api/households`
å®¶æ—ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
\`\`\`json
{
  "title": "å²©é–“å®¶",
  "members_count": 4,
  "members": [{"gender": "male", "age_band": "adult"}],
  "start_date": "2026-01-05",
  "months": 1,
  "budget_tier_per_person": 500,
  "budget_distribution": "average",
  "cooking_time_limit_min": 30,
  "shopping_frequency": "weekly",
  "fish_frequency": "normal",
  "dislikes": [],
  "allergies": {"standard": [], "free_text": []}
}
\`\`\`

#### `GET /api/households/{householdId}`
å®¶æ—ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—

#### `POST /api/plans/generate`
çŒ®ç«‹ç”Ÿæˆ
\`\`\`json
{
  "household_id": "uuid"
}
\`\`\`

#### `GET /api/plans/{planId}`
çŒ®ç«‹å–å¾—

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«

- **recipes**: ãƒ¬ã‚·ãƒ”ãƒã‚¹ã‚¿ï¼ˆä¸»èœ/å‰¯èœ/æ±ç‰©ï¼‰
- **ingredients**: é£Ÿæãƒã‚¹ã‚¿
- **households**: å®¶æ—ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
- **meal_plans**: çŒ®ç«‹è¨ˆç”»
- **meal_plan_days**: æ—¥åˆ¥çŒ®ç«‹
- **shopping_lists**: è²·ã„ç‰©ãƒªã‚¹ãƒˆï¼ˆæœªå®Ÿè£…ï¼‰

è©³ç´°ã¯ `migrations/0001_initial_schema.sql` ã‚’å‚ç…§

## æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **è²·ã„ç‰©ãƒªã‚¹ãƒˆç”Ÿæˆæ©Ÿèƒ½ã®å®Ÿè£…**
   - é€±ã”ã¨ã®é›†è¨ˆ
   - é£Ÿæã‚«ãƒ†ã‚´ãƒªåˆ¥è¡¨ç¤º

2. **çŒ®ç«‹å·®ã—æ›¿ãˆæ©Ÿèƒ½**
   - ç†ç”±é¸æŠï¼ˆæ™‚é–“ãŒãªã„/é£ŸæãŒãªã„/æ°—åˆ†ï¼‰
   - é€±ã®é€£å‹•ã‚’ç¶­æŒ

3. **ãƒ¬ã‚·ãƒ”ã®æ‹¡å……**
   - ç¾åœ¨3å“ â†’ 50å“ â†’ 500å“

4. **é£Ÿæä½¿ã„å›ã—æœ€é©åŒ–ãƒ­ã‚¸ãƒƒã‚¯**
   - ä½äºˆç®—æ™‚ã® reuse_keys é‡ã¿èª¿æ•´
   - é€±å†…ã®é£Ÿæé€£å‹•å¼·åŒ–

5. **å­£ç¯€ãƒ»é­šé »åº¦ã®è€ƒæ…®**
   - æ—¬ã®é£Ÿæå„ªå…ˆ
   - é€±å†…ã®é­šæ–™ç†å›æ•°åˆ¶å¾¡

## ãƒ‡ãƒ—ãƒ­ã‚¤

### Cloudflare Pages ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆå®Œäº†æ¸ˆã¿ï¼‰

âœ… **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: aichef
âœ… **æœ¬ç•ªURL**: https://aichef-595.pages.dev
âœ… **D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: aichef-production (ID: 633e7128-1cf4-4607-8d22-60b0251a00f2)

```bash
# ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ‡ãƒ—ãƒ­ã‚¤
npx wrangler pages deploy dist --project-name aichef --branch main
```

### D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†

```bash
# æœ¬ç•ªDBã«ã‚¹ã‚­ãƒ¼ãƒé©ç”¨
npx wrangler d1 execute aichef-production --remote --file=migrations/0001_initial_schema.sql

# æœ¬ç•ªDBã«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
npx wrangler d1 execute aichef-production --remote --file=seed.sql
npx wrangler d1 execute aichef-production --remote --file=migrations/0003_minimal_recipes.sql

# æœ¬ç•ªDBã‚¯ã‚¨ãƒªå®Ÿè¡Œ
npx wrangler d1 execute aichef-production --remote --command="SELECT * FROM recipes"
```

## å…¬é–‹URL

- **æœ¬ç•ªç’°å¢ƒï¼ˆCloudflare Pagesï¼‰**: https://aichef-595.pages.dev
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: aichef
- **é–‹ç™ºç’°å¢ƒï¼ˆSandboxï¼‰**: https://3000-i2ssbzavhkm9slw3om8jl-2b54fc91.sandbox.novita.ai

### âš ï¸ é‡è¦ï¼šD1ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°è¨­å®š

Cloudflare Pagesã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®è¨­å®šãŒå¿…è¦ã§ã™ï¼š

1. [Cloudflare Dashboard](https://dash.cloudflare.com/) ã«ãƒ­ã‚°ã‚¤ãƒ³
2. **Workers & Pages** â†’ **aichef** ã‚’é¸æŠ
3. **Settings** ã‚¿ãƒ– â†’ **Functions** ã‚»ã‚¯ã‚·ãƒ§ãƒ³
4. **D1 database bindings** â†’ **Add binding**
5. ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š
   - Variable name: `DB`
   - D1 database: `aichef-production`
6. **Save** ã—ã¦å†ãƒ‡ãƒ—ãƒ­ã‚¤

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT

## ä½œæˆè€…

ã¦ã¤ã˜ - ä¼šç¤¾å½¹å“¡ã€è¤‡æ•°ä¼æ¥­ã®çµŒå–¶è€…ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ

---

**è€ƒãˆãªãã¦ã„ã„ã€æ‚©ã¾ãªãã¦ã„ã„ã€‚**  
æ–™ç†ã¯ã€ä½œã‚‹ã ã‘ã§ååˆ†ã€‚è€ƒãˆã‚‹ä½œæ¥­ã¯ã€Aãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ä»»ã›ã¦ãã ã•ã„ã€‚
